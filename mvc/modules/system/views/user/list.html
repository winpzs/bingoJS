<div class="row-fluid" style="visibility: hidden;"
    bg-controller="ctrl/system/user/list">
    <div class="span12">
        <p>
            <button class="btn btn-small btn-success"
                bg-click="user.create()"><i class="icon-asterisk"></i> 创建用户</button>
            <button class="btn btn-small btn-success"
                bg-click="user.delAll()"><i class="icon-asterisk"></i> 删除所有</button>
        </p>
        <table id="table_bug_report" class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th class="center" style="width:40px;">
                        <label>
                            <input type="checkbox" /><span class="lbl"></span></label>
                    </th>
                    <th>用户名称</th>
                    <th>登录帐号</th>
                    <th>角色</th>
                    <th class="hidden-480">性别</th>
                    <th class="hidden-480">邮箱</th>
                    <th class="hidden-phone">手机</th>
                    <th class="hidden-480">备注</th>
                    <!--{{ }}为文本绑定标签, 会随user.list.length改变而改变
                        此标签只能输出text, html文本会被编码成普通文本-->
                    <th style="width:120px;">记录数:{{user.list.length}}</th>
                </tr>
            </thead>
            <!--bg-render模板内容可以用script包装, 这样更好解决浏览解释问题-->
            <tbody bg-render="item in user.list">
                <script type="text/html">
                    <tr>
                        <td class="center">
                            <label>
                                <input type="checkbox" /><span class="lbl"></span></label>
                        </td>
                        <td><a href="javascript:void(0)"
                            bg-click="user.viewInfo(item)">${item.name}</a></td>
                        <!--${ }标签是render模板标签, 只能用于bg-render模板
                            只输出结果, 没有双向绑定数据, 以节省性能-->
                        <td>${item.loginId}</td>
                        <td>${roleService.getName(item.role)}</td>
                        <td class="hidden-480">
                            <!--支持过滤器, 这里使用了过滤器 'sw'
                                意思是: 如果item.sex属性值等于'男'则输出'success', '女'则输出'warning', 其他则输出'grey'-->
                            <span class="label label-${item.sex | sw:['男', 'success', '女', 'warning', 'grey']}">
                                <!--支持if语法-->
                                ${if item.sex=='男'}
                                    男性
                                ${else}
                                    ${if item.sex=='女'}
                                        女性
                                    ${else}
                                        保密
                                    ${/if}
                                ${/if}
                            </span>
                        </td>
                        <td class="hidden-480">${item.email}</td>
                        <td class="hidden-phone">${item.phone}</td>
                        <!--使用过滤器 'text', 输出文本, 防止html编码-->
                        <td class="hidden-480">${item.desc | text}</td>
                        <td>
                            <div class="hidden-phone visible-desktop btn-group">
                                <!--绑定标签bg-click可以使用模板item变量(当前行数据),
                                     可以完全让view与controller分离开发-->
                                <button class="btn btn-mini btn-info"
                                    bg-click="user.edit(item)"><i class="icon-edit"></i></button>

                                <!--bg-event可以使用自定义事件-->
                                <button class="btn btn-mini btn-danger"
                                    bg-event="{ click: function(){user.doDelete(item);} }"><i class="icon-trash"></i></button>
                            </div>
                        </td>
                    </tr>
                </script>
            </tbody>
        </table>
    <!--/span-->
</div>
